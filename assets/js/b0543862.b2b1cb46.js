"use strict";(self.webpackChunk_webda_docs=self.webpackChunk_webda_docs||[]).push([[35292],{32216:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>t,contentTitle:()=>i,default:()=>a,frontMatter:()=>c,metadata:()=>d,toc:()=>l});var o=n(17624),r=n(4552);const c={},i="Class: SecureCookie",d={id:"core/classes/SecureCookie",title:"SecureCookie",description:"@webda/core \u2022 Readme \\| API",source:"@site/typedoc/core/classes/SecureCookie.md",sourceDirName:"core/classes",slug:"/core/classes/SecureCookie",permalink:"/typedoc/core/classes/SecureCookie",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebar",previous:{title:"SecretString",permalink:"/typedoc/core/classes/SecretString"},next:{title:"Service",permalink:"/typedoc/core/classes/Service"}},t={},l=[{value:"Constructors",id:"constructors",level:2},{value:"new SecureCookie()",id:"new-securecookie",level:3},{value:"Returns",id:"returns",level:4},{value:"Methods",id:"methods",level:2},{value:"load()",id:"load",level:3},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns-1",level:4},{value:"Source",id:"source",level:4},{value:"save()",id:"save",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-2",level:4},{value:"Source",id:"source-1",level:4},{value:"sendCookie()",id:"sendcookie",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"Returns",id:"returns-3",level:4},{value:"Source",id:"source-2",level:4}];function h(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",p:"p",strong:"strong",...(0,r.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"@webda/core"})," \u2022 ",(0,o.jsx)(s.a,{href:"/typedoc/core/",children:"Readme"})," | ",(0,o.jsx)(s.a,{href:"/typedoc/core/globals",children:"API"})]}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h1,{id:"class-securecookie",children:"Class: SecureCookie"}),"\n",(0,o.jsx)(s.p,{children:"Object that handle the session"}),"\n",(0,o.jsx)(s.p,{children:"To get stateless server the session is encrypted inside a cookie, so you should not store large amount of data in it\nIf you need big session then i would suggest to use a Memcache store with the user.uuid as a key"}),"\n",(0,o.jsx)(s.p,{children:"It is part of the core framework implementation, you should not rely on any method of this object, as the implementation can change if needed\nAn object session is exposed by the framework, so use this one ( for now it is a SecureCookie.getProxy() but can evolve )"}),"\n",(0,o.jsx)(s.p,{children:"The object use Object.observe if available or try Proxy in other case, so old JS VM won't run it"}),"\n",(0,o.jsx)(s.p,{children:"You cannot store variables starting with _ in the session if you do use them they won't be persist, so it can be used to add some context"}),"\n",(0,o.jsx)(s.h2,{id:"constructors",children:"Constructors"}),"\n",(0,o.jsx)(s.h3,{id:"new-securecookie",children:"new SecureCookie()"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:"new SecureCookie"}),"(): ",(0,o.jsx)(s.a,{href:"/typedoc/core/classes/SecureCookie",children:(0,o.jsx)(s.code,{children:"SecureCookie"})})]}),"\n"]}),"\n",(0,o.jsx)(s.h4,{id:"returns",children:"Returns"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"/typedoc/core/classes/SecureCookie",children:(0,o.jsx)(s.code,{children:"SecureCookie"})})}),"\n",(0,o.jsx)(s.h2,{id:"methods",children:"Methods"}),"\n",(0,o.jsx)(s.h3,{id:"load",children:"load()"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.code,{children:"static"})})," ",(0,o.jsx)(s.strong,{children:"load"}),"(",(0,o.jsx)(s.code,{children:"name"}),", ",(0,o.jsx)(s.code,{children:"context"}),", ",(0,o.jsx)(s.code,{children:"options"}),"?): ",(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"any"}),">"]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Load cookie"}),"\n",(0,o.jsx)(s.p,{children:"It manages the split of the cookie to 4096 if required"}),"\n",(0,o.jsx)(s.h4,{id:"parameters",children:"Parameters"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"name"}),": ",(0,o.jsx)(s.code,{children:"string"})]}),"\n",(0,o.jsx)(s.p,{children:"cookie name"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"context"}),": ",(0,o.jsx)(s.a,{href:"/typedoc/core/classes/WebContext",children:(0,o.jsx)(s.code,{children:"WebContext"})}),"<",(0,o.jsx)(s.code,{children:"any"}),", ",(0,o.jsx)(s.code,{children:"any"}),">"]}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"options?"}),": ",(0,o.jsx)(s.a,{href:"/typedoc/core/interfaces/JWTOptions",children:(0,o.jsx)(s.code,{children:"JWTOptions"})})]}),"\n",(0,o.jsx)(s.h4,{id:"returns-1",children:"Returns"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"any"}),">"]}),"\n",(0,o.jsx)(s.h4,{id:"source",children:"Source"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://github.com/loopingz/webda.io/blob/1dcb7360/packages/core/src/utils/cookie.ts#L98",children:"packages/core/src/utils/cookie.ts:98"})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h3,{id:"save",children:"save()"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.code,{children:"static"})})," ",(0,o.jsx)(s.strong,{children:"save"}),"(",(0,o.jsx)(s.code,{children:"name"}),", ",(0,o.jsx)(s.code,{children:"context"}),", ",(0,o.jsx)(s.code,{children:"data"}),", ",(0,o.jsx)(s.code,{children:"options"}),"?, ",(0,o.jsx)(s.code,{children:"cookieOptions"}),"?): ",(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"void"}),">"]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Send a cookie, split it if required"}),"\n",(0,o.jsx)(s.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"name"}),": ",(0,o.jsx)(s.code,{children:"string"})]}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"context"}),": ",(0,o.jsx)(s.a,{href:"/typedoc/core/classes/WebContext",children:(0,o.jsx)(s.code,{children:"WebContext"})}),"<",(0,o.jsx)(s.code,{children:"any"}),", ",(0,o.jsx)(s.code,{children:"any"}),">"]}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"data"}),": ",(0,o.jsx)(s.code,{children:"any"})]}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"options?"}),": ",(0,o.jsx)(s.a,{href:"/typedoc/core/interfaces/JWTOptions",children:(0,o.jsx)(s.code,{children:"JWTOptions"})})]}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"cookieOptions?"}),": ",(0,o.jsx)(s.code,{children:"Partial"}),"<",(0,o.jsx)(s.a,{href:"/typedoc/core/classes/CookieOptions",children:(0,o.jsx)(s.code,{children:"CookieOptions"})}),">"]}),"\n",(0,o.jsx)(s.h4,{id:"returns-2",children:"Returns"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"Promise"}),"<",(0,o.jsx)(s.code,{children:"void"}),">"]}),"\n",(0,o.jsx)(s.h4,{id:"source-1",children:"Source"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://github.com/loopingz/webda.io/blob/1dcb7360/packages/core/src/utils/cookie.ts#L141",children:"packages/core/src/utils/cookie.ts:141"})}),"\n",(0,o.jsx)(s.hr,{}),"\n",(0,o.jsx)(s.h3,{id:"sendcookie",children:"sendCookie()"}),"\n",(0,o.jsxs)(s.blockquote,{children:["\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.code,{children:"static"})})," ",(0,o.jsx)(s.strong,{children:"sendCookie"}),"(",(0,o.jsx)(s.code,{children:"ctx"}),", ",(0,o.jsx)(s.code,{children:"name"}),", ",(0,o.jsx)(s.code,{children:"value"}),", ",(0,o.jsx)(s.code,{children:"params"}),"): ",(0,o.jsx)(s.code,{children:"void"})]}),"\n"]}),"\n",(0,o.jsx)(s.p,{children:"Will send the cookie to context and split it\nif needed as max length for cookies are 4096\nincluding the params (the whole Set-Cookie header)"}),"\n",(0,o.jsx)(s.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"ctx"}),": ",(0,o.jsx)(s.a,{href:"/typedoc/core/classes/WebContext",children:(0,o.jsx)(s.code,{children:"WebContext"})}),"<",(0,o.jsx)(s.code,{children:"any"}),", ",(0,o.jsx)(s.code,{children:"any"}),">"]}),"\n",(0,o.jsx)(s.p,{children:"to send cookie to"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"name"}),": ",(0,o.jsx)(s.code,{children:"string"})]}),"\n",(0,o.jsx)(s.p,{children:"name of the cookie"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"value"}),": ",(0,o.jsx)(s.code,{children:"string"})]}),"\n",(0,o.jsx)(s.p,{children:"of the cookie"}),"\n",(0,o.jsxs)(s.p,{children:["\u2022 ",(0,o.jsx)(s.strong,{children:"params"}),": ",(0,o.jsx)(s.a,{href:"/typedoc/core/classes/CookieOptions",children:(0,o.jsx)(s.code,{children:"CookieOptions"})})]}),"\n",(0,o.jsx)(s.p,{children:"for the cookie"}),"\n",(0,o.jsx)(s.h4,{id:"returns-3",children:"Returns"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.code,{children:"void"})}),"\n",(0,o.jsx)(s.h4,{id:"source-2",children:"Source"}),"\n",(0,o.jsx)(s.p,{children:(0,o.jsx)(s.a,{href:"https://github.com/loopingz/webda.io/blob/1dcb7360/packages/core/src/utils/cookie.ts#L162",children:"packages/core/src/utils/cookie.ts:162"})})]})}function a(e={}){const{wrapper:s}={...(0,r.M)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},4552:(e,s,n)=>{n.d(s,{I:()=>d,M:()=>i});var o=n(11504);const r={},c=o.createContext(r);function i(e){const s=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(c.Provider,{value:s},e.children)}}}]);