{
  "moddas": {
    "webda/asyncjobservice": "lib/services/asyncjobservice:default",
    "webda/localrunner": "lib/services/localrunner:default",
    "webda/servicerunner": "lib/services/servicerunner:default"
  },
  "beans": {},
  "models": {
    "webda/asyncaction": "lib/models:default"
  },
  "deployers": {},
  "schemas": {
    "webda/asyncaction": {
      "type": "object",
      "properties": {
        "_creationDate": {
          "type": "string",
          "format": "date-time",
          "description": "Creation date",
          "readOnly": true
        },
        "_lastUpdate": {
          "type": "string",
          "format": "date-time",
          "description": "Last update date",
          "readOnly": true
        },
        "uuid": {
          "type": "string",
          "description": "Action uuid"
        },
        "status": {
          "type": "string",
          "enum": [
            "RUNNING",
            "SUCCESS",
            "ERROR",
            "QUEUED",
            "STARTING",
            "TIMEOUT",
            "SCHEDULED"
          ],
          "description": "Current status"
        },
        "scheduled": {
          "type": "number",
          "description": "Timestamp when the action was scheduled"
        },
        "errorMessage": {
          "type": "string",
          "description": "If an error occured it should contain the message"
        },
        "job": {
          "type": "object",
          "description": "Job information"
        },
        "_lastJobUpdate": {
          "type": "number",
          "description": "Last time the job was updated",
          "readOnly": true
        },
        "results": {
          "description": "Results from the job"
        },
        "statusDetails": {
          "description": "Job current status"
        },
        "type": {
          "type": "string"
        },
        "arguments": {
          "type": "array",
          "items": {}
        },
        "logs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Current logs"
        },
        "action": {
          "type": "string",
          "description": "Expected action for the job\n\nIt should be a verb"
        }
      },
      "required": [
        "uuid",
        "status",
        "job",
        "results",
        "statusDetails",
        "type",
        "logs"
      ],
      "description": "Define here a model that can be used along with Store service",
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AsyncAction"
    },
    "webda/asyncjobservice": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "Type of the service"
        },
        "url": {
          "type": "string",
          "description": "URL to expose job status report hook",
          "default": "/async/jobs"
        },
        "store": {
          "type": "string",
          "description": "Store name to use for async actions",
          "default": "AsyncActions"
        },
        "binaryStore": {
          "type": "string",
          "description": "If we want to expose a way to upload/download binary for the job\n\nIt will expose a /download and /upload additional url"
        },
        "localLaunch": {
          "type": "boolean",
          "description": "If set runner will be called without queue",
          "default": false
        },
        "queue": {
          "type": "string",
          "description": "Queue to post execution to",
          "default": "AsyncActionsQueue"
        },
        "fallbackOnFirst": {
          "type": "boolean",
          "description": "Fallback on first runner if none match",
          "default": false
        },
        "runners": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Runners to use"
        },
        "concurrencyLimit": {
          "type": "number",
          "description": "Limit the maximum number of jobs running in //"
        },
        "schedulerResolution": {
          "type": "number",
          "description": "Schedule action resolution\n\nIf set to 1000ms, you can schedule action per second by default it resolve per minute",
          "default": 60000
        },
        "openapi": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "fallbackOnFirst",
        "queue",
        "runners",
        "store",
        "type",
        "url"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AsyncJobService"
    },
    "webda/localrunner": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "Type of the service"
        },
        "url": {
          "type": "string",
          "description": "URL on which to serve the content"
        },
        "actions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Actions managed by the runner",
          "default": []
        },
        "command": {
          "type": "string",
          "description": "Command to launch"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Args"
        },
        "options": {
          "type": "object",
          "properties": {
            "serialization": {
              "$ref": "#/definitions/SerializationType",
              "description": "Specify the kind of serialization used for sending messages between processes.",
              "default": "json"
            },
            "uid": {
              "type": "number"
            },
            "gid": {
              "type": "number"
            },
            "cwd": {
              "type": "string"
            },
            "env": {
              "type": "object",
              "properties": {}
            },
            "windowsHide": {
              "type": "boolean",
              "default": true
            },
            "timeout": {
              "type": "number",
              "default": 0
            },
            "argv0": {
              "type": "string"
            },
            "stdio": {
              "$ref": "#/definitions/StdioOptions"
            },
            "shell": {
              "type": [
                "boolean",
                "string"
              ]
            },
            "windowsVerbatimArguments": {
              "type": "boolean"
            },
            "detached": {
              "type": "boolean"
            }
          },
          "description": "Options\n\nBased on https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options"
        },
        "autoStatus": {
          "type": "boolean",
          "description": "Use the observability of ChildProcess to update status accordingly"
        },
        "openapi": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "command",
        "type"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#",
      "definitions": {
        "SerializationType": {
          "type": "string",
          "enum": [
            "json",
            "advanced"
          ]
        },
        "StdioOptions": {
          "anyOf": [
            {
              "type": "string",
              "const": "pipe"
            },
            {
              "type": "string",
              "const": "ignore"
            },
            {
              "type": "string",
              "const": "inherit"
            },
            {
              "type": "array",
              "items": {
                "anyOf": [
                  {
                    "type": "string",
                    "const": "pipe"
                  },
                  {
                    "type": "string",
                    "const": "ipc"
                  },
                  {
                    "type": "string",
                    "const": "ignore"
                  },
                  {
                    "type": "string",
                    "const": "inherit"
                  },
                  {
                    "type": "object",
                    "properties": {}
                  },
                  {
                    "type": "number"
                  },
                  {
                    "type": "null"
                  },
                  {
                    "not": {}
                  }
                ]
              }
            }
          ]
        }
      },
      "title": "LocalRunner"
    },
    "webda/servicerunner": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "description": "Type of the service"
        },
        "url": {
          "type": "string",
          "description": "URL on which to serve the content"
        },
        "actions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Actions managed by the runner",
          "default": []
        },
        "openapi": {
          "type": "object",
          "additionalProperties": true
        }
      },
      "required": [
        "type"
      ],
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ServiceRunner"
    }
  }
}